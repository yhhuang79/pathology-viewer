{"version":3,"sources":["components/heatmap.js","components/OpenSeaDragonView.js","components/openseadragon-heatmapjs-overlay.js","App.js","serviceWorker.js","index.js"],"names":["context","factory","this","HeatmapConfig","defaultRadius","defaultRenderer","defaultGradient","0.25","0.55","0.85","1","defaultMaxOpacity","defaultMinOpacity","defaultBlur","defaultXField","defaultYField","defaultValueField","plugins","Store","config","_coordinator","_data","_radi","_min","_max","_xField","_yField","_valueField","_cfgRadius","prototype","_organiseData","dataPoint","forceRender","x","y","radi","store","max","min","value","radius","storedVal","setDataMax","setDataMin","_unOrganizeData","unorganizedData","data","push","_onExtremaChange","emit","addData","arguments","length","dataArr","dataLen","call","organisedEntry","setData","dataPoints","pointsLen","i","_getInternalData","removeData","setCoordinator","coordinator","getData","Canvas2dRenderer","_getColorPalette","gradientConfig","gradient","paletteCanvas","document","createElement","paletteCtx","getContext","width","height","createLinearGradient","key","addColorStop","fillStyle","fillRect","getImageData","_getPointTemplate","blurFactor","tplCanvas","tplCtx","beginPath","arc","Math","PI","fill","createRadialGradient","container","shadowCanvas","canvas","computed","_renderBoundaries","getComputedStyle","className","_width","replace","_height","shadowCtx","ctx","style","cssText","position","appendChild","_palette","_templates","_setStyles","renderPartial","_drawAlpha","_colorize","renderAll","_clear","renderData","xValues","Object","keys","xValuesLen","xValue","yValues","yValuesLen","yValue","_prepareData","_updateGradient","updateConfig","setDimensions","clearRect","_blur","blur","backgroundColor","_opacity","opacity","_maxOpacity","maxOpacity","_minOpacity","minOpacity","_useGradientOpacity","useGradientOpacity","tpl","point","rectX","rectY","templateAlpha","globalAlpha","drawImage","maxWidth","maxHeight","img","imgData","len","palette","finalAlpha","alpha","offset","putImageData","getValueAt","abs","getDataURL","toDataURL","Renderer","rendererFn","Util","merged","argsLen","obj","Heatmap","Coordinator","cStore","on","evtName","callback","scope","_connect","renderer","_renderer","_store","_config","onExtremaChange","pluginToLoad","Error","plugin","apply","configure","repaint","create","register","pluginKey","module","exports","viewer","HeatmapOverlay","cfg","_viewer","initialize","CSS_TRANSFORM","div","props","prop","undefined","clientWidth","clientHeight","onAdd","d","entry","dataObj","update","zoom","viewport","getZoom","generatedData","points","localMax","valueField","viewportPoint","imageToViewportCoordinates","imagePoint","pixelFromPoint","getContainerSize","round","useLocalExtrema","heatmap","changeHandler","addHandler","arg","userData","draw","console","log","h337","paintHeatmap","n","npyjs","load","ndArray","ndShape","shape","map","ndd","floor","OpenSeaDragonView","React","useEffect","OpenSeaDragon","id","debugMode","visibilityRatio","constrainDuringPan","showNavigator","zoomPerScroll","showRotationControl","addTiledImage","tileSource","success","useStyles","makeStyles","theme","root","display","appBar","zIndex","drawer","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","content","flexGrow","App","classes","useTheme","useState","open","setOpen","CssBaseline","AppBar","clsx","Toolbar","IconButton","color","aria-label","onClick","edge","Typography","variant","noWrap","Drawer","paper","direction","Divider","List","text","index","ListItem","button","ListItemIcon","ListItemText","primary","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"8GAQC,IAAiBA,EAASC,EAATD,EAWPE,KAXgBD,EAWV,WAGjB,IAAIE,EAAgB,CAClBC,cAAe,GACfC,gBAAiB,WACjBC,gBAAiB,CAAEC,IAAM,eAAgBC,IAAM,eAAgBC,IAAM,SAAUC,EAAK,gBACpFC,kBAAmB,EACnBC,kBAAmB,EACnBC,YAAa,IACbC,cAAe,IACfC,cAAe,IACfC,kBAAmB,QACnBC,QAAS,IAEPC,EAAS,WAEX,IAAIA,EAAQ,SAAeC,GACzBjB,KAAKkB,aAAe,GACpBlB,KAAKmB,MAAQ,GACbnB,KAAKoB,MAAQ,GACbpB,KAAKqB,KAAO,GACZrB,KAAKsB,KAAO,EACZtB,KAAKuB,QAAUN,EAAM,QAAcA,EAAOL,cAC1CZ,KAAKwB,QAAUP,EAAM,QAAcA,EAAOJ,cAC1Cb,KAAKyB,YAAcR,EAAM,YAAkBA,EAAOH,kBAE9CG,EAAM,SACRjB,KAAK0B,WAAaT,EAAM,SAIxBf,EAAgBD,EAAcC,cAkMlC,OAhMAc,EAAMW,UAAY,CAEhBC,cAAe,SAASC,EAAWC,GAC/B,IAAIC,EAAIF,EAAU7B,KAAKuB,SACnBS,EAAIH,EAAU7B,KAAKwB,SACnBS,EAAOjC,KAAKoB,MACZc,EAAQlC,KAAKmB,MACbgB,EAAMnC,KAAKsB,KACXc,EAAMpC,KAAKqB,KACXgB,EAAQR,EAAU7B,KAAKyB,cAAgB,EACvCa,EAAST,EAAUS,QAAUtC,KAAK0B,YAAcxB,EAE/CgC,EAAMH,KACTG,EAAMH,GAAK,GACXE,EAAKF,GAAK,IAGPG,EAAMH,GAAGC,GAIZE,EAAMH,GAAGC,IAAMK,GAHfH,EAAMH,GAAGC,GAAKK,EACdJ,EAAKF,GAAGC,GAAKM,GAIf,IAAIC,EAAYL,EAAMH,GAAGC,GAEzB,OAAIO,EAAYJ,GACTL,EAGH9B,KAAKwC,WAAWD,GAFhBvC,KAAKsB,KAAOiB,GAIP,GACEA,EAAYH,GAChBN,EAGH9B,KAAKyC,WAAWF,GAFhBvC,KAAKqB,KAAOkB,GAIP,GAEA,CACLR,EAAGA,EACHC,EAAGA,EACHK,MAAOA,EACPC,OAAQA,EACRF,IAAKA,EACLD,IAAKA,IAIbO,gBAAiB,WACf,IAAIC,EAAkB,GAClBC,EAAO5C,KAAKmB,MACZc,EAAOjC,KAAKoB,MAEhB,IAAK,IAAIW,KAAKa,EACZ,IAAK,IAAIZ,KAAKY,EAAKb,GAEjBY,EAAgBE,KAAK,CACnBd,EAAGA,EACHC,EAAGA,EACHM,OAAQL,EAAKF,GAAGC,GAChBK,MAAOO,EAAKb,GAAGC,KAKrB,MAAO,CACLI,IAAKpC,KAAKqB,KACVc,IAAKnC,KAAKsB,KACVsB,KAAMD,IAGVG,iBAAkB,WAChB9C,KAAKkB,aAAa6B,KAAK,gBAAiB,CACtCX,IAAKpC,KAAKqB,KACVc,IAAKnC,KAAKsB,QAGd0B,QAAS,WACP,GAAIC,UAAU,GAAGC,OAAS,EAGxB,IAFA,IAAIC,EAAUF,UAAU,GACpBG,EAAUD,EAAQD,OACfE,KACLpD,KAAKgD,QAAQK,KAAKrD,KAAMmD,EAAQC,QAE7B,CAEL,IAAIE,EAAiBtD,KAAK4B,cAAcqB,UAAU,IAAI,GAClDK,IAEwB,IAAtBtD,KAAKmB,MAAM+B,SACblD,KAAKqB,KAAOrB,KAAKsB,KAAOgC,EAAejB,OAEzCrC,KAAKkB,aAAa6B,KAAK,gBAAiB,CACtCX,IAAKpC,KAAKqB,KACVc,IAAKnC,KAAKsB,KACVsB,KAAM,CAACU,MAIb,OAAOtD,MAETuD,QAAS,SAASX,GAChB,IAAIY,EAAaZ,EAAKA,KAClBa,EAAYD,EAAWN,OAI3BlD,KAAKmB,MAAQ,GACbnB,KAAKoB,MAAQ,GAEb,IAAI,IAAIsC,EAAI,EAAGA,EAAID,EAAWC,IAC5B1D,KAAK4B,cAAc4B,EAAWE,IAAI,GAOpC,OALA1D,KAAKsB,KAAOsB,EAAKT,IACjBnC,KAAKqB,KAAOuB,EAAKR,KAAO,EAExBpC,KAAK8C,mBACL9C,KAAKkB,aAAa6B,KAAK,YAAa/C,KAAK2D,oBAClC3D,MAET4D,WAAY,aAGZpB,WAAY,SAASL,GAInB,OAHAnC,KAAKsB,KAAOa,EACZnC,KAAK8C,mBACL9C,KAAKkB,aAAa6B,KAAK,YAAa/C,KAAK2D,oBAClC3D,MAETyC,WAAY,SAASL,GAInB,OAHApC,KAAKqB,KAAOe,EACZpC,KAAK8C,mBACL9C,KAAKkB,aAAa6B,KAAK,YAAa/C,KAAK2D,oBAClC3D,MAET6D,eAAgB,SAASC,GACvB9D,KAAKkB,aAAe4C,GAEtBH,iBAAkB,WAChB,MAAO,CACLxB,IAAKnC,KAAKsB,KACVc,IAAKpC,KAAKqB,KACVuB,KAAM5C,KAAKmB,MACXc,KAAMjC,KAAKoB,QAGf2C,QAAS,WACP,OAAO/D,KAAK0C,oBA2CT1B,EAnNI,GAsNTgD,EAAoB,WAEtB,IAAIC,EAAmB,SAAShD,GAC9B,IAAIiD,EAAiBjD,EAAOkD,UAAYlD,EAAOb,gBAC3CgE,EAAgBC,SAASC,cAAc,UACvCC,EAAaH,EAAcI,WAAW,MAE1CJ,EAAcK,MAAQ,IACtBL,EAAcM,OAAS,EAEvB,IAAIP,EAAWI,EAAWI,qBAAqB,EAAG,EAAG,IAAK,GAC1D,IAAK,IAAIC,KAAOV,EACdC,EAASU,aAAaD,EAAKV,EAAeU,IAM5C,OAHAL,EAAWO,UAAYX,EACvBI,EAAWQ,SAAS,EAAG,EAAG,IAAK,GAExBR,EAAWS,aAAa,EAAG,EAAG,IAAK,GAAGpC,MAG3CqC,EAAoB,SAAS3C,EAAQ4C,GACvC,IAAIC,EAAYd,SAASC,cAAc,UACnCc,EAASD,EAAUX,WAAW,MAC9BzC,EAAIO,EACJN,EAAIM,EAGR,GAFA6C,EAAUV,MAAQU,EAAUT,OAAgB,EAAPpC,EAEnB,GAAd4C,EACFE,EAAOC,YACPD,EAAOE,IAAIvD,EAAGC,EAAGM,EAAQ,EAAG,EAAIiD,KAAKC,IAAI,GACzCJ,EAAON,UAAY,gBACnBM,EAAOK,WACF,CACL,IAAItB,EAAWiB,EAAOM,qBAAqB3D,EAAGC,EAAGM,EAAO4C,EAAYnD,EAAGC,EAAGM,GAC1E6B,EAASU,aAAa,EAAG,iBACzBV,EAASU,aAAa,EAAG,iBACzBO,EAAON,UAAYX,EACnBiB,EAAOL,SAAS,EAAG,EAAG,EAAEzC,EAAQ,EAAEA,GAKpC,OAAO6C,GAsCT,SAASnB,EAAiB/C,GACxB,IAAI0E,EAAY1E,EAAO0E,UACnBC,EAAe5F,KAAK4F,aAAevB,SAASC,cAAc,UAC1DuB,EAAS7F,KAAK6F,OAAS5E,EAAO4E,QAAUxB,SAASC,cAAc,UAG/DwB,GAFmB9F,KAAK+F,kBAAoB,CAAC,IAAO,IAAO,EAAG,GAEnDC,iBAAiB/E,EAAO0E,YAAc,IAErDE,EAAOI,UAAY,iBAEnBjG,KAAKkG,OAASL,EAAOpB,MAAQmB,EAAanB,MAAQxD,EAAOwD,QAAWqB,EAASrB,MAAM0B,QAAQ,KAAK,IAChGnG,KAAKoG,QAAUP,EAAOnB,OAASkB,EAAalB,OAASzD,EAAOyD,SAAYoB,EAASpB,OAAOyB,QAAQ,KAAK,IAErGnG,KAAKqG,UAAYT,EAAapB,WAAW,MACzCxE,KAAKsG,IAAMT,EAAOrB,WAAW,MAK7BqB,EAAOU,MAAMC,QAAUZ,EAAaW,MAAMC,QAAU,kCAEpDb,EAAUY,MAAME,SAAW,WAC3Bd,EAAUe,YAAYb,GAEtB7F,KAAK2G,SAAW1C,EAAiBhD,GACjCjB,KAAK4G,WAAa,GAElB5G,KAAK6G,WAAW5F,GAkMlB,OA/LA+C,EAAiBrC,UAAY,CAC3BmF,cAAe,SAASlE,GAClBA,EAAKA,KAAKM,OAAS,IACrBlD,KAAK+G,WAAWnE,GAChB5C,KAAKgH,cAGTC,UAAW,SAASrE,GAElB5C,KAAKkH,SACDtE,EAAKA,KAAKM,OAAS,IACrBlD,KAAK+G,WA5EQ,SAASnE,GAU1B,IATA,IAAIuE,EAAa,GACb/E,EAAMQ,EAAKR,IACXD,EAAMS,EAAKT,IACXF,EAAOW,EAAKX,KAGZmF,GAFAxE,EAAOA,EAAKA,KAEFyE,OAAOC,KAAK1E,IACtB2E,EAAaH,EAAQlE,OAEnBqE,KAIJ,IAHA,IAAIC,EAASJ,EAAQG,GACjBE,EAAUJ,OAAOC,KAAK1E,EAAK4E,IAC3BE,EAAaD,EAAQvE,OACnBwE,KAAc,CAClB,IAAIC,EAASF,EAAQC,GACjBrF,EAAQO,EAAK4E,GAAQG,GACrBrF,EAASL,EAAKuF,GAAQG,GAC1BR,EAAWtE,KAAK,CACdd,EAAGyF,EACHxF,EAAG2F,EACHtF,MAAOA,EACPC,OAAQA,IAKd,MAAO,CACLF,IAAKA,EACLD,IAAKA,EACLS,KAAMuE,GA8CYS,CAAahF,IAC7B5C,KAAKgH,cAGTa,gBAAiB,SAAS5G,GACxBjB,KAAK2G,SAAW1C,EAAiBhD,IAEnC6G,aAAc,SAAS7G,GACjBA,EAAM,UACRjB,KAAK6H,gBAAgB5G,GAEvBjB,KAAK6G,WAAW5F,IAElB8G,cAAe,SAAStD,EAAOC,GAC7B1E,KAAKkG,OAASzB,EACdzE,KAAKoG,QAAU1B,EACf1E,KAAK6F,OAAOpB,MAAQzE,KAAK4F,aAAanB,MAAQA,EAC9CzE,KAAK6F,OAAOnB,OAAS1E,KAAK4F,aAAalB,OAASA,GAElDwC,OAAQ,WACNlH,KAAKqG,UAAU2B,UAAU,EAAG,EAAGhI,KAAKkG,OAAQlG,KAAKoG,SACjDpG,KAAKsG,IAAI0B,UAAU,EAAG,EAAGhI,KAAKkG,OAAQlG,KAAKoG,UAE7CS,WAAY,SAAS5F,GACnBjB,KAAKiI,MAAwB,GAAfhH,EAAOiH,KAAW,EAAGjH,EAAOiH,MAAQjH,EAAON,YAErDM,EAAOkH,kBACTnI,KAAK6F,OAAOU,MAAM4B,gBAAkBlH,EAAOkH,iBAG7CnI,KAAKkG,OAASlG,KAAK6F,OAAOpB,MAAQzE,KAAK4F,aAAanB,MAAQxD,EAAOwD,OAASzE,KAAKkG,OACjFlG,KAAKoG,QAAUpG,KAAK6F,OAAOnB,OAAS1E,KAAK4F,aAAalB,OAASzD,EAAOyD,QAAU1E,KAAKoG,QAGrFpG,KAAKoI,SAAmC,KAAvBnH,EAAOoH,SAAW,GACnCrI,KAAKsI,YAAgE,KAAjDrH,EAAOsH,YAActH,EAAOR,mBAChDT,KAAKwI,YAAgE,KAAjDvH,EAAOwH,YAAcxH,EAAOP,mBAChDV,KAAK0I,sBAAwBzH,EAAO0H,oBAEtC5B,WAAY,SAASnE,GAQnB,IAPA,IAAIR,EAAMpC,KAAKqB,KAAOuB,EAAKR,IACvBD,EAAMnC,KAAKsB,KAAOsB,EAAKT,IAEvBiB,GADAR,EAAOA,EAAKA,MAAQ,IACLM,OAEfgF,EAAO,EAAIlI,KAAKiI,MAEd7E,KAAW,CAEf,IAeIwF,EAfAC,EAAQjG,EAAKQ,GAEbrB,EAAI8G,EAAM9G,EACVC,EAAI6G,EAAM7G,EACVM,EAASuG,EAAMvG,OAGfD,EAAQkD,KAAKnD,IAAIyG,EAAMxG,MAAOF,GAC9B2G,EAAQ/G,EAAIO,EACZyG,EAAQ/G,EAAIM,EACZ+D,EAAYrG,KAAKqG,UAMhBrG,KAAK4G,WAAWtE,GAGnBsG,EAAM5I,KAAK4G,WAAWtE,GAFtBtC,KAAK4G,WAAWtE,GAAUsG,EAAM3D,EAAkB3C,EAAQ4F,GAM5D,IAAIc,GAAiB3G,EAAMD,IAAMD,EAAIC,GAErCiE,EAAU4C,YAAcD,EAAgB,IAAM,IAAMA,EAEjC,IAAfJ,EAAIlE,QAA8B,IAAdkE,EAAInE,OAAa4B,EAAU6C,UAAUN,EAAKE,EAAOC,GAGrED,EAAQ9I,KAAK+F,kBAAkB,KAC/B/F,KAAK+F,kBAAkB,GAAK+C,GAE1BC,EAAQ/I,KAAK+F,kBAAkB,KACjC/F,KAAK+F,kBAAkB,GAAKgD,GAE1BD,EAAQ,EAAExG,EAAStC,KAAK+F,kBAAkB,KAC5C/F,KAAK+F,kBAAkB,GAAK+C,EAAQ,EAAExG,GAEpCyG,EAAQ,EAAEzG,EAAStC,KAAK+F,kBAAkB,KAC5C/F,KAAK+F,kBAAkB,GAAKgD,EAAQ,EAAEzG,KAK9C0E,UAAW,WACT,IAAIjF,EAAI/B,KAAK+F,kBAAkB,GAC3B/D,EAAIhC,KAAK+F,kBAAkB,GAC3BtB,EAAQzE,KAAK+F,kBAAkB,GAAKhE,EACpC2C,EAAS1E,KAAK+F,kBAAkB,GAAK/D,EACrCmH,EAAWnJ,KAAKkG,OAChBkD,EAAYpJ,KAAKoG,QACjBiC,EAAUrI,KAAKoI,SACfG,EAAavI,KAAKsI,YAClBG,EAAazI,KAAKwI,YAClBG,EAAqB3I,KAAK0I,oBAE1B3G,EAAI,IACNA,EAAI,GAEFC,EAAI,IACNA,EAAI,GAEFD,EAAI0C,EAAQ0E,IACd1E,EAAQ0E,EAAWpH,GAEjBC,EAAI0C,EAAS0E,IACf1E,EAAS0E,EAAYpH,GASvB,IANA,IAAIqH,EAAMrJ,KAAKqG,UAAUrB,aAAajD,EAAGC,EAAGyC,EAAOC,GAC/C4E,EAAUD,EAAIzG,KACd2G,EAAMD,EAAQpG,OACdsG,EAAUxJ,KAAK2G,SAGVjD,EAAI,EAAGA,EAAI6F,EAAK7F,GAAI,EAAG,CAC9B,IAQI+F,EARAC,EAAQJ,EAAQ5F,GAChBiG,EAAiB,EAARD,EAGRC,IAMHF,EADEpB,EAAU,EACCA,EAETqB,EAAQnB,EACNmB,EAAQjB,EACGA,EAEAiB,EAGFnB,EAIjBe,EAAQ5F,EAAE,GAAK8F,EAAQG,GACvBL,EAAQ5F,EAAE,GAAK8F,EAAQG,EAAS,GAChCL,EAAQ5F,EAAE,GAAK8F,EAAQG,EAAS,GAChCL,EAAQ5F,GAAKiF,EAAqBa,EAAQG,EAAS,GAAKF,GAI1DJ,EAAIzG,KAAO0G,EACXtJ,KAAKsG,IAAIsD,aAAaP,EAAKtH,EAAGC,GAE9BhC,KAAK+F,kBAAoB,CAAC,IAAM,IAAM,EAAG,IAG3C8D,WAAY,SAAShB,GACnB,IAGIjG,EAFY5C,KAAKqG,UACDrB,aAAa6D,EAAM9G,EAAG8G,EAAM7G,EAAG,EAAG,GACvCY,KAAK,GAChBT,EAAMnC,KAAKsB,KACXc,EAAMpC,KAAKqB,KAIf,OAFSkE,KAAKuE,IAAI3H,EAAIC,IAAQQ,EAAK,MAAS,GAI9CmH,WAAY,WACV,OAAO/J,KAAK6F,OAAOmE,cAKhBhG,EA9Se,GAkTpBiG,EAAY,WAEd,IAAIC,GAAa,EAMjB,MAJyC,aAArCjK,EAAa,kBACfiK,EAAalG,GAGRkG,EARO,GAYZC,EACK,WAGL,IAFA,IAAIC,EAAS,GACTC,EAAUpH,UAAUC,OACfQ,EAAI,EAAGA,EAAI2G,EAAS3G,IAAK,CAChC,IAAI4G,EAAMrH,UAAUS,GACpB,IAAK,IAAIkB,KAAO0F,EACdF,EAAOxF,GAAO0F,EAAI1F,GAGtB,OAAOwF,GAIPG,EAAW,WAEb,IAAIC,EAAe,WAEjB,SAASA,IACPxK,KAAKyK,OAAS,GA0BhB,OAvBAD,EAAY7I,UAAY,CACtB+I,GAAI,SAASC,EAASC,EAAUC,GAC9B,IAAIJ,EAASzK,KAAKyK,OAEbA,EAAOE,KACVF,EAAOE,GAAW,IAEpBF,EAAOE,GAAS9H,MAAM,SAASD,GAC3B,OAAOgI,EAASvH,KAAKwH,EAAOjI,OAGlCG,KAAM,SAAS4H,EAAS/H,GACtB,IAAI6H,EAASzK,KAAKyK,OAClB,GAAIA,EAAOE,GAET,IADA,IAAIpB,EAAMkB,EAAOE,GAASzH,OACjBQ,EAAE,EAAGA,EAAE6F,EAAK7F,KAEnBkH,EADeH,EAAOE,GAASjH,IACtBd,KAMV4H,EA7BU,GAiCfM,EAAW,SAASD,GACtB,IAAIE,EAAWF,EAAMG,UACjBlH,EAAc+G,EAAM3J,aACpBgB,EAAQ2I,EAAMI,OAElBnH,EAAY4G,GAAG,gBAAiBK,EAASjE,cAAeiE,GACxDjH,EAAY4G,GAAG,YAAaK,EAAS9D,UAAW8D,GAChDjH,EAAY4G,GAAG,iBAAiB,SAAS9H,GACvCiI,EAAMK,QAAQC,iBACdN,EAAMK,QAAQC,gBAAgB,CAC5B/I,IAAKQ,EAAKR,IACVD,IAAKS,EAAKT,IACVgC,SAAU0G,EAAMK,QAAN,UAA6BL,EAAMK,QAAN,qBAG3ChJ,EAAM2B,eAAeC,IAIvB,SAASyG,IACP,IAAItJ,EAASjB,KAAKkL,QAAUf,EAAWlK,EAAegD,UAAU,IAAM,IAEtE,GADAjD,KAAKkB,aAAe,IAAIsJ,EACpBvJ,EAAM,OAAY,CACpB,IAAImK,EAAenK,EAAM,OACzB,IAAKhB,EAAcc,QAAQqK,GACzB,MAAM,IAAIC,MAAM,WAAaD,EAAe,6CAE5C,IAAIE,EAASrL,EAAcc,QAAQqK,GAEnCpL,KAAKgL,UAAY,IAAIM,EAAOP,SAAS9J,GACrCjB,KAAKiL,OAAS,IAAIK,EAAOpJ,MAAMjB,QAGjCjB,KAAKgL,UAAY,IAAIf,EAAShJ,GAC9BjB,KAAKiL,OAAS,IAAIjK,EAAMC,GAE1B6J,EAAS9K,MAsDX,OAjDAuK,EAAQ5I,UAAY,CAClBqB,QAAS,WAEP,OADAhD,KAAKiL,OAAOjI,QAAQuI,MAAMvL,KAAKiL,OAAQhI,WAChCjD,MAET4D,WAAY,WAEV,OADA5D,KAAKiL,OAAOrH,YAAc5D,KAAKiL,OAAOrH,WAAW2H,MAAMvL,KAAKiL,OAAQhI,WAC7DjD,MAETuD,QAAS,WAEP,OADAvD,KAAKiL,OAAO1H,QAAQgI,MAAMvL,KAAKiL,OAAQhI,WAChCjD,MAETwC,WAAY,WAEV,OADAxC,KAAKiL,OAAOzI,WAAW+I,MAAMvL,KAAKiL,OAAQhI,WACnCjD,MAETyC,WAAY,WAEV,OADAzC,KAAKiL,OAAOxI,WAAW8I,MAAMvL,KAAKiL,OAAQhI,WACnCjD,MAETwL,UAAW,SAASvK,GAIlB,OAHAjB,KAAKkL,QAAUf,EAAWnK,KAAKkL,QAASjK,GACxCjB,KAAKgL,UAAUlD,aAAa9H,KAAKkL,SACjClL,KAAKkB,aAAa6B,KAAK,YAAa/C,KAAKiL,OAAOtH,oBACzC3D,MAETyL,QAAS,WAEP,OADAzL,KAAKkB,aAAa6B,KAAK,YAAa/C,KAAKiL,OAAOtH,oBACzC3D,MAET+D,QAAS,WACP,OAAO/D,KAAKiL,OAAOlH,WAErBgG,WAAY,WACV,OAAO/J,KAAKgL,UAAUjB,cAExBF,WAAY,SAAShB,GAEnB,OAAI7I,KAAKiL,OAAOpB,WACP7J,KAAKiL,OAAOpB,WAAWhB,GACpB7I,KAAKgL,UAAUnB,WAClB7J,KAAKgL,UAAUnB,WAAWhB,GAE1B,OAKN0B,EA7HM,GA4If,MATqB,CACnBmB,OAAQ,SAASzK,GACf,OAAO,IAAIsJ,EAAQtJ,IAErB0K,SAAU,SAASC,EAAWN,GAC5BrL,EAAcc,QAAQ6K,GAAaN,KAjsBAO,EAAOC,QAC1CD,EAAOC,QAAU/L,IAIjBD,EAAO,KAASC,K,yHCVhBgM,E,kUCGW,SAASC,EAAeD,EAAQE,GAE7CjM,KAAKkM,QAAUH,EACf/L,KAAKmM,WAAWF,GAAO,IAGzBD,EAAeI,cAAiB,WAU9B,IATA,IAAIC,EAAMhI,SAASC,cAAc,OAC7BgI,EAAQ,CACR,YACA,kBACA,eACA,aACA,eAGK5I,EAAI,EAAGA,EAAI4I,EAAMpJ,OAAQQ,IAAK,CACnC,IAAI6I,EAAOD,EAAM5I,GACjB,QAAwB8I,IAApBH,EAAI9F,MAAMgG,GACV,OAAOA,EAGf,OAAOD,EAAM,GAhBiB,GAmBhCN,EAAerK,UAAUwK,WAAa,SAAUF,GAC9CjM,KAAKiM,IAAMA,EAIX,IAAItG,EAAY3F,KAAK2F,UAAYtB,SAASC,cAAc,OACpDG,EAAQzE,KAAKyE,MAAQzE,KAAKkM,QAAQvG,UAAU8G,YAC5C/H,EAAS1E,KAAK0E,OAAS1E,KAAKkM,QAAQvG,UAAU+G,aAElD/G,EAAUY,MAAMC,QAAU,SAAW/B,EAAQ,aAAeC,EAAS,MAErE1E,KAAK4C,KAAO,GACZ5C,KAAKmC,IAAM,EAEX8J,EAAItG,UAAYA,EAEhB3F,KAAK2M,SAGPX,EAAerK,UAAU4B,QAAU,SAAUX,GAC3C5C,KAAKmC,IAAMS,EAAKT,IAOhB,IAJA,IACIoH,GADA3G,EAAOA,EAAKA,MACDM,OACX0J,EAAI,GAEDrD,KAAO,CACV,IAAIsD,EAAQjK,EAAK2G,GACbuD,EAAU,GACdA,EAAQzK,MAAQwK,EAAMxK,MACtByK,EAAQ/K,EAAI8K,EAAM9K,EAClB+K,EAAQ9K,EAAI6K,EAAM7K,EACd6K,EAAMvK,SACNwK,EAAQxK,OAASuK,EAAMvK,QAE3BsK,EAAE/J,KAAKiK,GAEX9M,KAAK4C,KAAOgK,EACZ5M,KAAK+M,UAGPf,EAAerK,UAAUoL,OAAS,WAChC,IAAIC,EAAOhN,KAAKkM,QAAQe,SAASC,SAAQ,GAEzC,GAAwB,GAApBlN,KAAK4C,KAAKM,OAAd,CAIA,IAAIiK,EAAgB,CAAEhL,IAAKnC,KAAKmC,KAC5BiL,EAAS,GAET7D,EAAMvJ,KAAK4C,KAAKM,OAChBmK,EAAW,EAIf,IAHiBrN,KAAKiM,IAAIqB,WAGnB/D,KAAO,CACV,IAAIsD,EAAQ7M,KAAK4C,KAAK2G,GAClBlH,EAAQwK,EAAMxK,MAEdA,EAAQgL,IACRA,EAAWhL,GAGf,IAAIkL,EAAiBvN,KAAKkM,QAAQe,SAASO,2BAA2BX,EAAM9K,EAAG8K,EAAM7K,GACjFyL,EAAazN,KAAKkM,QAAQe,SAASS,eAAeH,GAAgB,GAGtE,KAAIE,EAAW1L,GAAK,GAAK0L,EAAWzL,GAAK,GAAKyL,EAAW1L,GAAK/B,KAAKkM,QAAQe,SAASU,mBAAmB5L,GAAK0L,EAAWzL,GAAKhC,KAAKkM,QAAQe,SAASU,mBAAmB3L,GAArK,CAGA,IAEIM,EAFAuG,EAAQ,CAAE9G,EAAGwD,KAAKqI,MAAMH,EAAW1L,GAAIC,EAAGuD,KAAKqI,MAAMH,EAAWzL,GAAIK,MAAQA,GAK5EC,EADAuK,EAAMvK,OACGuK,EAAMvK,OAAS0K,GAEdhN,KAAKiM,IAAI3J,QAAU,IAAM0K,EAEvCnE,EAAMvG,OAASA,EACf8K,EAAOvK,KAAKgG,IAEZ7I,KAAKiM,IAAI4B,kBACTV,EAAchL,IAAMkL,GAGxBF,EAAcvK,KAAOwK,EAErBpN,KAAK8N,QAAQvK,QAAQ4J,KAIvBnB,EAAerK,UAAUgL,MAAQ,WAE/B3M,KAAKkM,QAAQrG,OAAOa,YAAY1G,KAAK2F,WAErC3F,KAAK+N,cAAgB/N,KAAKkM,QAAQ8B,WAAW,mBAAmB,SAAUC,GACtEA,EAAIC,SAASC,KAAK9K,KAAK4K,EAAIC,YAC5BlO,MAGEA,KAAK8N,UACNM,QAAQC,IAAI,iBAAkBrO,KAAKiM,KACnCjM,KAAK8N,QAAUQ,IAAK5C,OAAO1L,KAAKiM,MAEpCjM,KAAKmO,QAGPnC,EAAerK,UAAUwM,KAAO,WACzBnO,KAAKkM,SAEVlM,KAAK+M,UD3IP,IAAMwB,EAAe,WACnB,IAAIC,EAAI,IAAIC,IACNX,EAAU,IAAI9B,EAAeD,EAAQ,CACzC5D,gBAAiB,gBAEjBI,WAAY,GAEZE,WAAY,MAGV2E,EAAS,GACTjL,EAAM,EACVqM,EAAEE,KAAK,kBAAkB,SAAAC,GAGvBP,QAAQC,IAAI,cAAeM,GAC3B,IAAMC,EAAUD,EAAQE,MACTF,EAAQ/L,KAChBkM,KAAI,SAACC,EAAKrL,GAEf,GAAY,IAARqL,EAAW,CACb5M,EAAMoD,KAAKpD,IAAIA,EAAW,IAAN4M,GACpB,IAAMlG,EAAQ,CACZ9G,EAAI2B,EAAIkL,EAAQ,GAAM,GAAK,GAC3B5M,EAAgC,GAA7BuD,KAAKyJ,MAAMtL,EAAIkL,EAAQ,IAAW,GACrCvM,MAAa,IAAN0M,EACPzM,OAAQ,IAEV8K,EAAOvK,KAAKgG,OAGhBuF,QAAQC,IAAI,SAAUjB,GACtB,IAAIxK,EAAO,CACTT,IAAKA,EACLS,KAAMwK,GAERU,EAAQvK,QAAQX,OAkDLqM,EAtBW,WAmBxB,OAlBAC,IAAMC,WAAU,YACdpD,EAASqD,IAAc,CACrBC,GAAI,mBACJC,WAAY,EACfC,gBAAiB,EACjBC,oBAAoB,EACpBC,eAAe,EACfC,cAAe,IACfC,qBAAqB,KAEbC,cAAc,CACnBC,WAAY,aACZ9N,EAAG,EACHC,EAAG,EACH8N,QAASvB,MAEX,IAEM,yBAAKc,GAAG,mBAAmB9I,MAAO,CAAE7B,OAAQ,OAAQD,MAAO,WElE/DsL,G,MAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,QAAS,QAEXC,OAAQ,CACNC,OAAQJ,EAAMI,OAAOC,OAAS,EAC9BC,WAAYN,EAAMO,YAAY9E,OAAO,CAAC,QAAS,UAAW,CACxD+E,OAAQR,EAAMO,YAAYC,OAAOC,MACjCC,SAAUV,EAAMO,YAAYG,SAASC,iBAGzCC,YAAa,CACXC,WAdgB,IAehBrM,MAAM,eAAD,OAfW,IAeX,OACL8L,WAAYN,EAAMO,YAAY9E,OAAO,CAAC,QAAS,UAAW,CACxD+E,OAAQR,EAAMO,YAAYC,OAAOC,MACjCC,SAAUV,EAAMO,YAAYG,SAASI,kBAGzCC,WAAY,CACVC,YAAa,IAEfC,KAAM,CACJf,QAAS,QAEXG,OAAQ,CACN7L,MA5BgB,IA6BhB0M,WAAY,EACZC,WAAY,UAEdC,WAAY,CACV5M,MAjCgB,IAkChB8L,WAAYN,EAAMO,YAAY9E,OAAO,QAAS,CAC5C+E,OAAQR,EAAMO,YAAYC,OAAOC,MACjCC,SAAUV,EAAMO,YAAYG,SAASI,kBAGzCO,YAAY,aACVf,WAAYN,EAAMO,YAAY9E,OAAO,QAAS,CAC5C+E,OAAQR,EAAMO,YAAYC,OAAOC,MACjCC,SAAUV,EAAMO,YAAYG,SAASC,gBAEvCW,UAAW,SACX9M,MAAOwL,EAAMuB,QAAQ,GAAK,GACzBvB,EAAMwB,YAAYC,GAAG,MAAQ,CAC5BjN,MAAOwL,EAAMuB,QAAQ,GAAK,IAG9BG,QAAQ,aACNxB,QAAS,OACTyB,WAAY,SACZC,eAAgB,WAChBC,QAAS7B,EAAMuB,QAAQ,EAAG,IAEvBvB,EAAM8B,OAAOJ,SAElBK,QAAS,CACPC,SAAU,EACVH,QAAS,QAwFEI,EApFH,WAAO,IAAD,IACVC,EAAUpC,IACVE,EAAQmC,cAFE,EAGQlD,IAAMmD,UAAS,GAHvB,mBAGTC,EAHS,KAGHC,EAHG,KAahB,OACE,yBAAKtM,UAAWkM,EAAQjC,MACtB,kBAACsC,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,CACEhM,SAAS,QACTR,UAAWyM,YAAKP,EAAQ/B,OAAT,eACZ+B,EAAQtB,YAAcyB,KAGzB,kBAACK,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,MAAM,UACNC,aAAW,cACXC,QArBe,WACvBR,GAAQ,IAqBAS,KAAK,QACL/M,UAAWyM,YAAKP,EAAQnB,WAAT,eACZmB,EAAQjB,KAAOoB,KAGlB,kBAAC,IAAD,OAEF,kBAACW,EAAA,EAAD,CAAYC,QAAQ,KAAKC,QAAM,GAA/B,sBAKJ,kBAACC,EAAA,EAAD,CACEF,QAAQ,YACRjN,UAAWyM,YAAKP,EAAQ7B,QAAT,mBACZ6B,EAAQd,WAAaiB,GADT,cAEZH,EAAQb,aAAegB,GAFX,IAIfH,QAAS,CACPkB,MAAOX,aAAI,mBACRP,EAAQd,WAAaiB,GADb,cAERH,EAAQb,aAAegB,GAFf,MAMb,yBAAKrM,UAAWkM,EAAQR,SACtB,kBAACiB,EAAA,EAAD,CAAYG,QA5CM,WACxBR,GAAQ,KA4CqB,QAApBtC,EAAMqD,UAAsB,kBAAC,IAAD,MAAuB,kBAAC,IAAD,QAGxD,kBAACC,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACG,CAAC,QAAS,UAAW,aAAc,UAAU1E,KAAI,SAAC2E,EAAMC,GAAP,OAChD,kBAACC,EAAA,EAAD,CAAUC,QAAM,EAAChP,IAAK6O,GACpB,kBAACI,EAAA,EAAD,KAAeH,EAAQ,IAAM,EAAI,kBAAC,IAAD,MAAgB,kBAAC,IAAD,OACjD,kBAACI,EAAA,EAAD,CAAcC,QAASN,SAI7B,kBAACF,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACG,CAAC,WAAY,QAAS,QAAQ1E,KAAI,SAAC2E,EAAMC,GAAP,OACjC,kBAACC,EAAA,EAAD,CAAUC,QAAM,EAAChP,IAAK6O,GACpB,kBAACI,EAAA,EAAD,KAAeH,EAAQ,IAAM,EAAI,kBAAC,IAAD,MAAgB,kBAAC,IAAD,OACjD,kBAACI,EAAA,EAAD,CAAcC,QAASN,UAK/B,0BAAMxN,UAAWkM,EAAQH,SACvB,yBAAK/L,UAAWkM,EAAQR,UACxB,kBAAC,EAAD,SCzJYqC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFlQ,SAASmQ,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACL5G,QAAQ4G,MAAMA,EAAMC,c","file":"static/js/main.dc6cb981.chunk.js","sourcesContent":["/*\n * heatmap.js v2.0.5 | JavaScript Heatmap Library\n *\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\n * Dual licensed under MIT and Beerware license\n *\n * :: 2016-09-05 01:16\n */\n;(function (name, context, factory) {\n\n  // Supports UMD. AMD, CommonJS/Node.js and browser context\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  // } else if (typeof define === \"function\" && define.amd) {\n  //   define(factory);\n  } else {\n    context[name] = factory();\n  }\n\n})(\"h337\", this, function () {\n\n// Heatmap Config stores default values and will be merged with instance config\nvar HeatmapConfig = {\n  defaultRadius: 40,\n  defaultRenderer: 'canvas2d',\n  defaultGradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"},\n  defaultMaxOpacity: 1,\n  defaultMinOpacity: 0,\n  defaultBlur: .85,\n  defaultXField: 'x',\n  defaultYField: 'y',\n  defaultValueField: 'value',\n  plugins: {}\n};\nvar Store = (function StoreClosure() {\n\n  var Store = function Store(config) {\n    this._coordinator = {};\n    this._data = [];\n    this._radi = [];\n    this._min = 10;\n    this._max = 1;\n    this._xField = config['xField'] || config.defaultXField;\n    this._yField = config['yField'] || config.defaultYField;\n    this._valueField = config['valueField'] || config.defaultValueField;\n\n    if (config[\"radius\"]) {\n      this._cfgRadius = config[\"radius\"];\n    }\n  };\n\n  var defaultRadius = HeatmapConfig.defaultRadius;\n\n  Store.prototype = {\n    // when forceRender = false -> called from setData, omits renderall event\n    _organiseData: function(dataPoint, forceRender) {\n        var x = dataPoint[this._xField];\n        var y = dataPoint[this._yField];\n        var radi = this._radi;\n        var store = this._data;\n        var max = this._max;\n        var min = this._min;\n        var value = dataPoint[this._valueField] || 1;\n        var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\n\n        if (!store[x]) {\n          store[x] = [];\n          radi[x] = [];\n        }\n\n        if (!store[x][y]) {\n          store[x][y] = value;\n          radi[x][y] = radius;\n        } else {\n          store[x][y] += value;\n        }\n        var storedVal = store[x][y];\n\n        if (storedVal > max) {\n          if (!forceRender) {\n            this._max = storedVal;\n          } else {\n            this.setDataMax(storedVal);\n          }\n          return false;\n        } else if (storedVal < min) {\n          if (!forceRender) {\n            this._min = storedVal;\n          } else {\n            this.setDataMin(storedVal);\n          }\n          return false;\n        } else {\n          return {\n            x: x,\n            y: y,\n            value: value,\n            radius: radius,\n            min: min,\n            max: max\n          };\n        }\n    },\n    _unOrganizeData: function() {\n      var unorganizedData = [];\n      var data = this._data;\n      var radi = this._radi;\n\n      for (var x in data) {\n        for (var y in data[x]) {\n\n          unorganizedData.push({\n            x: x,\n            y: y,\n            radius: radi[x][y],\n            value: data[x][y]\n          });\n\n        }\n      }\n      return {\n        min: this._min,\n        max: this._max,\n        data: unorganizedData\n      };\n    },\n    _onExtremaChange: function() {\n      this._coordinator.emit('extremachange', {\n        min: this._min,\n        max: this._max\n      });\n    },\n    addData: function() {\n      if (arguments[0].length > 0) {\n        var dataArr = arguments[0];\n        var dataLen = dataArr.length;\n        while (dataLen--) {\n          this.addData.call(this, dataArr[dataLen]);\n        }\n      } else {\n        // add to store\n        var organisedEntry = this._organiseData(arguments[0], true);\n        if (organisedEntry) {\n          // if it's the first datapoint initialize the extremas with it\n          if (this._data.length === 0) {\n            this._min = this._max = organisedEntry.value;\n          }\n          this._coordinator.emit('renderpartial', {\n            min: this._min,\n            max: this._max,\n            data: [organisedEntry]\n          });\n        }\n      }\n      return this;\n    },\n    setData: function(data) {\n      var dataPoints = data.data;\n      var pointsLen = dataPoints.length;\n\n\n      // reset data arrays\n      this._data = [];\n      this._radi = [];\n\n      for(var i = 0; i < pointsLen; i++) {\n        this._organiseData(dataPoints[i], false);\n      }\n      this._max = data.max;\n      this._min = data.min || 0;\n\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    removeData: function() {\n      // TODO: implement\n    },\n    setDataMax: function(max) {\n      this._max = max;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setDataMin: function(min) {\n      this._min = min;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setCoordinator: function(coordinator) {\n      this._coordinator = coordinator;\n    },\n    _getInternalData: function() {\n      return {\n        max: this._max,\n        min: this._min,\n        data: this._data,\n        radi: this._radi\n      };\n    },\n    getData: function() {\n      return this._unOrganizeData();\n    }/*,\n\n      TODO: rethink.\n\n    getValueAt: function(point) {\n      var value;\n      var radius = 100;\n      var x = point.x;\n      var y = point.y;\n      var data = this._data;\n\n      if (data[x] && data[x][y]) {\n        return data[x][y];\n      } else {\n        var values = [];\n        // radial search for datapoints based on default radius\n        for(var distance = 1; distance < radius; distance++) {\n          var neighbors = distance * 2 +1;\n          var startX = x - distance;\n          var startY = y - distance;\n\n          for(var i = 0; i < neighbors; i++) {\n            for (var o = 0; o < neighbors; o++) {\n              if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\n                if (data[startY+i] && data[startY+i][startX+o]) {\n                  values.push(data[startY+i][startX+o]);\n                }\n              } else {\n                continue;\n              }\n            }\n          }\n        }\n        if (values.length > 0) {\n          return Math.max.apply(Math, values);\n        }\n      }\n      return false;\n    }*/\n  };\n\n\n  return Store;\n})();\n\nvar Canvas2dRenderer = (function Canvas2dRendererClosure() {\n\n  var _getColorPalette = function(config) {\n    var gradientConfig = config.gradient || config.defaultGradient;\n    var paletteCanvas = document.createElement('canvas');\n    var paletteCtx = paletteCanvas.getContext('2d');\n\n    paletteCanvas.width = 256;\n    paletteCanvas.height = 1;\n\n    var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n    for (var key in gradientConfig) {\n      gradient.addColorStop(key, gradientConfig[key]);\n    }\n\n    paletteCtx.fillStyle = gradient;\n    paletteCtx.fillRect(0, 0, 256, 1);\n\n    return paletteCtx.getImageData(0, 0, 256, 1).data;\n  };\n\n  var _getPointTemplate = function(radius, blurFactor) {\n    var tplCanvas = document.createElement('canvas');\n    var tplCtx = tplCanvas.getContext('2d');\n    var x = radius;\n    var y = radius;\n    tplCanvas.width = tplCanvas.height = radius*2;\n\n    if (blurFactor == 1) {\n      tplCtx.beginPath();\n      tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      tplCtx.fillStyle = 'rgba(0,0,0,1)';\n      tplCtx.fill();\n    } else {\n      var gradient = tplCtx.createRadialGradient(x, y, radius*blurFactor, x, y, radius);\n      gradient.addColorStop(0, 'rgba(0,0,0,1)');\n      gradient.addColorStop(1, 'rgba(0,0,0,0)');\n      tplCtx.fillStyle = gradient;\n      tplCtx.fillRect(0, 0, 2*radius, 2*radius);\n    }\n\n\n\n    return tplCanvas;\n  };\n\n  var _prepareData = function(data) {\n    var renderData = [];\n    var min = data.min;\n    var max = data.max;\n    var radi = data.radi;\n    var data = data.data;\n\n    var xValues = Object.keys(data);\n    var xValuesLen = xValues.length;\n\n    while(xValuesLen--) {\n      var xValue = xValues[xValuesLen];\n      var yValues = Object.keys(data[xValue]);\n      var yValuesLen = yValues.length;\n      while(yValuesLen--) {\n        var yValue = yValues[yValuesLen];\n        var value = data[xValue][yValue];\n        var radius = radi[xValue][yValue];\n        renderData.push({\n          x: xValue,\n          y: yValue,\n          value: value,\n          radius: radius\n        });\n      }\n    }\n\n    return {\n      min: min,\n      max: max,\n      data: renderData\n    };\n  };\n\n\n  function Canvas2dRenderer(config) {\n    var container = config.container;\n    var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\n    var canvas = this.canvas = config.canvas || document.createElement('canvas');\n    var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\n\n    var computed = getComputedStyle(config.container) || {};\n\n    canvas.className = 'heatmap-canvas';\n\n    this._width = canvas.width = shadowCanvas.width = config.width || +(computed.width.replace(/px/,''));\n    this._height = canvas.height = shadowCanvas.height = config.height || +(computed.height.replace(/px/,''));\n\n    this.shadowCtx = shadowCanvas.getContext('2d');\n    this.ctx = canvas.getContext('2d');\n\n    // @TODO:\n    // conditional wrapper\n\n    canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\n\n    container.style.position = 'relative';\n    container.appendChild(canvas);\n\n    this._palette = _getColorPalette(config);\n    this._templates = {};\n\n    this._setStyles(config);\n  };\n\n  Canvas2dRenderer.prototype = {\n    renderPartial: function(data) {\n      if (data.data.length > 0) {\n        this._drawAlpha(data);\n        this._colorize();\n      }\n    },\n    renderAll: function(data) {\n      // reset render boundaries\n      this._clear();\n      if (data.data.length > 0) {\n        this._drawAlpha(_prepareData(data));\n        this._colorize();\n      }\n    },\n    _updateGradient: function(config) {\n      this._palette = _getColorPalette(config);\n    },\n    updateConfig: function(config) {\n      if (config['gradient']) {\n        this._updateGradient(config);\n      }\n      this._setStyles(config);\n    },\n    setDimensions: function(width, height) {\n      this._width = width;\n      this._height = height;\n      this.canvas.width = this.shadowCanvas.width = width;\n      this.canvas.height = this.shadowCanvas.height = height;\n    },\n    _clear: function() {\n      this.shadowCtx.clearRect(0, 0, this._width, this._height);\n      this.ctx.clearRect(0, 0, this._width, this._height);\n    },\n    _setStyles: function(config) {\n      this._blur = (config.blur == 0)?0:(config.blur || config.defaultBlur);\n\n      if (config.backgroundColor) {\n        this.canvas.style.backgroundColor = config.backgroundColor;\n      }\n\n      this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\n      this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\n\n\n      this._opacity = (config.opacity || 0) * 255;\n      this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\n      this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\n      this._useGradientOpacity = !!config.useGradientOpacity;\n    },\n    _drawAlpha: function(data) {\n      var min = this._min = data.min;\n      var max = this._max = data.max;\n      var data = data.data || [];\n      var dataLen = data.length;\n      // on a point basis?\n      var blur = 1 - this._blur;\n\n      while(dataLen--) {\n\n        var point = data[dataLen];\n\n        var x = point.x;\n        var y = point.y;\n        var radius = point.radius;\n        // if value is bigger than max\n        // use max as value\n        var value = Math.min(point.value, max);\n        var rectX = x - radius;\n        var rectY = y - radius;\n        var shadowCtx = this.shadowCtx;\n\n\n\n\n        var tpl;\n        if (!this._templates[radius]) {\n          this._templates[radius] = tpl = _getPointTemplate(radius, blur);\n        } else {\n          tpl = this._templates[radius];\n        }\n        // value from minimum / value range\n        // => [0, 1]\n        var templateAlpha = (value-min)/(max-min);\n        // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\n        shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\n\n        if (tpl.height !== 0 && tpl.width !== 0) shadowCtx.drawImage(tpl, rectX, rectY);\n\n        // update renderBoundaries\n        if (rectX < this._renderBoundaries[0]) {\n            this._renderBoundaries[0] = rectX;\n          }\n          if (rectY < this._renderBoundaries[1]) {\n            this._renderBoundaries[1] = rectY;\n          }\n          if (rectX + 2*radius > this._renderBoundaries[2]) {\n            this._renderBoundaries[2] = rectX + 2*radius;\n          }\n          if (rectY + 2*radius > this._renderBoundaries[3]) {\n            this._renderBoundaries[3] = rectY + 2*radius;\n          }\n\n      }\n    },\n    _colorize: function() {\n      var x = this._renderBoundaries[0];\n      var y = this._renderBoundaries[1];\n      var width = this._renderBoundaries[2] - x;\n      var height = this._renderBoundaries[3] - y;\n      var maxWidth = this._width;\n      var maxHeight = this._height;\n      var opacity = this._opacity;\n      var maxOpacity = this._maxOpacity;\n      var minOpacity = this._minOpacity;\n      var useGradientOpacity = this._useGradientOpacity;\n\n      if (x < 0) {\n        x = 0;\n      }\n      if (y < 0) {\n        y = 0;\n      }\n      if (x + width > maxWidth) {\n        width = maxWidth - x;\n      }\n      if (y + height > maxHeight) {\n        height = maxHeight - y;\n      }\n\n      var img = this.shadowCtx.getImageData(x, y, width, height);\n      var imgData = img.data;\n      var len = imgData.length;\n      var palette = this._palette;\n\n\n      for (var i = 3; i < len; i+= 4) {\n        var alpha = imgData[i];\n        var offset = alpha * 4;\n\n\n        if (!offset) {\n          continue;\n        }\n\n        var finalAlpha;\n        if (opacity > 0) {\n          finalAlpha = opacity;\n        } else {\n          if (alpha < maxOpacity) {\n            if (alpha < minOpacity) {\n              finalAlpha = minOpacity;\n            } else {\n              finalAlpha = alpha;\n            }\n          } else {\n            finalAlpha = maxOpacity;\n          }\n        }\n\n        imgData[i-3] = palette[offset];\n        imgData[i-2] = palette[offset + 1];\n        imgData[i-1] = palette[offset + 2];\n        imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\n\n      }\n\n      img.data = imgData;\n      this.ctx.putImageData(img, x, y);\n\n      this._renderBoundaries = [1000, 1000, 0, 0];\n\n    },\n    getValueAt: function(point) {\n      var value;\n      var shadowCtx = this.shadowCtx;\n      var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\n      var data = img.data[3];\n      var max = this._max;\n      var min = this._min;\n\n      value = (Math.abs(max-min) * (data/255)) >> 0;\n\n      return value;\n    },\n    getDataURL: function() {\n      return this.canvas.toDataURL();\n    }\n  };\n\n\n  return Canvas2dRenderer;\n})();\n\n\nvar Renderer = (function RendererClosure() {\n\n  var rendererFn = false;\n\n  if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\n    rendererFn = Canvas2dRenderer;\n  }\n\n  return rendererFn;\n})();\n\n\nvar Util = {\n  merge: function() {\n    var merged = {};\n    var argsLen = arguments.length;\n    for (var i = 0; i < argsLen; i++) {\n      var obj = arguments[i]\n      for (var key in obj) {\n        merged[key] = obj[key];\n      }\n    }\n    return merged;\n  }\n};\n// Heatmap Constructor\nvar Heatmap = (function HeatmapClosure() {\n\n  var Coordinator = (function CoordinatorClosure() {\n\n    function Coordinator() {\n      this.cStore = {};\n    };\n\n    Coordinator.prototype = {\n      on: function(evtName, callback, scope) {\n        var cStore = this.cStore;\n\n        if (!cStore[evtName]) {\n          cStore[evtName] = [];\n        }\n        cStore[evtName].push((function(data) {\n            return callback.call(scope, data);\n        }));\n      },\n      emit: function(evtName, data) {\n        var cStore = this.cStore;\n        if (cStore[evtName]) {\n          var len = cStore[evtName].length;\n          for (var i=0; i<len; i++) {\n            var callback = cStore[evtName][i];\n            callback(data);\n          }\n        }\n      }\n    };\n\n    return Coordinator;\n  })();\n\n\n  var _connect = function(scope) {\n    var renderer = scope._renderer;\n    var coordinator = scope._coordinator;\n    var store = scope._store;\n\n    coordinator.on('renderpartial', renderer.renderPartial, renderer);\n    coordinator.on('renderall', renderer.renderAll, renderer);\n    coordinator.on('extremachange', function(data) {\n      scope._config.onExtremaChange &&\n      scope._config.onExtremaChange({\n        min: data.min,\n        max: data.max,\n        gradient: scope._config['gradient'] || scope._config['defaultGradient']\n      });\n    });\n    store.setCoordinator(coordinator);\n  };\n\n\n  function Heatmap() {\n    var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\n    this._coordinator = new Coordinator();\n    if (config['plugin']) {\n      var pluginToLoad = config['plugin'];\n      if (!HeatmapConfig.plugins[pluginToLoad]) {\n        throw new Error('Plugin \\''+ pluginToLoad + '\\' not found. Maybe it was not registered.');\n      } else {\n        var plugin = HeatmapConfig.plugins[pluginToLoad];\n        // set plugin renderer and store\n        this._renderer = new plugin.renderer(config);\n        this._store = new plugin.store(config);\n      }\n    } else {\n      this._renderer = new Renderer(config);\n      this._store = new Store(config);\n    }\n    _connect(this);\n  };\n\n  // @TODO:\n  // add API documentation\n  Heatmap.prototype = {\n    addData: function() {\n      this._store.addData.apply(this._store, arguments);\n      return this;\n    },\n    removeData: function() {\n      this._store.removeData && this._store.removeData.apply(this._store, arguments);\n      return this;\n    },\n    setData: function() {\n      this._store.setData.apply(this._store, arguments);\n      return this;\n    },\n    setDataMax: function() {\n      this._store.setDataMax.apply(this._store, arguments);\n      return this;\n    },\n    setDataMin: function() {\n      this._store.setDataMin.apply(this._store, arguments);\n      return this;\n    },\n    configure: function(config) {\n      this._config = Util.merge(this._config, config);\n      this._renderer.updateConfig(this._config);\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    repaint: function() {\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    getData: function() {\n      return this._store.getData();\n    },\n    getDataURL: function() {\n      return this._renderer.getDataURL();\n    },\n    getValueAt: function(point) {\n\n      if (this._store.getValueAt) {\n        return this._store.getValueAt(point);\n      } else  if (this._renderer.getValueAt) {\n        return this._renderer.getValueAt(point);\n      } else {\n        return null;\n      }\n    }\n  };\n\n  return Heatmap;\n\n})();\n\n\n// core\nvar heatmapFactory = {\n  create: function(config) {\n    return new Heatmap(config);\n  },\n  register: function(pluginKey, plugin) {\n    HeatmapConfig.plugins[pluginKey] = plugin;\n  }\n};\n\nreturn heatmapFactory;\n\n\n});","import React from 'react';\nimport npyjs from 'npyjs';\nimport OpenSeaDragon from 'openseadragon';\n\nimport HeatmapOverlay from './openseadragon-heatmapjs-overlay.js';\n\nvar viewer;\n\nconst paintHeatmap = () => {\n  let n = new npyjs();\n  const heatmap = new HeatmapOverlay(viewer, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    // the maximum opacity (the value with the highest intensity will have it)\n    maxOpacity: 0.5,\n    // minimum opacity. any value > 0 will produce no transparent gradient transition\n    minOpacity: 0.05\n  });\n  // now generate some random data\n  let points = [];\n  let max = 0;\n  n.load(\"/Tumor_047.npy\", ndArray => {\n    // `array` is a one-dimensional array of the raw data\n    // `shape` is a one-dimensional array that holds a numpy-style shape.\n    console.log('numpy array', ndArray);\n    const ndShape = ndArray.shape;\n    const ndData = ndArray.data;\n    ndData.map((ndd, i) => {\n      // (ndd !== 0) && console.log('ndd !== 0', i, ndd);\n      if (ndd !== 0) {\n        max = Math.max(max, ndd * 100);\n        const point = {\n          x: (i % ndShape[0]) * 64 - 32,\n          y: Math.floor(i / ndShape[0]) * 64 - 32,\n          value: ndd * 100,\n          radius: 64\n        };\n        points.push(point);\n      }\n    });\n    console.log('points', points);\n    var data = {\n      max: max,\n      data: points\n    };\n    heatmap.setData(data);\n  });\n  /*\n  var max = 0;\n  var width = 97792;\n  var height = 211456;\n  var len = 300;\n\n  while (len--) {\n    var val = Math.floor(Math.random()*100);\n    // now also with custom radius\n    var radius = Math.floor(Math.random()*70);\n\n    max = Math.max(max, val);\n    var point = {\n    x: Math.floor(Math.random()*width),\n    y: Math.floor(Math.random()*height),\n    value: val,\n    // radius configuration on point basis\n    radius: radius\n    };\n    points.push(point);\n  }\n  */\n  // heatmap data format\n}\n\n\nconst OpenSeaDragonView = () => {\n  React.useEffect(() => {\n    viewer = OpenSeaDragon({\n      id: \"seadragon-viewer\",\n      debugMode:  false,\n\t\t\tvisibilityRatio: 1.0,\n\t\t\tconstrainDuringPan: true,\n\t\t\tshowNavigator: true,\n\t\t\tzoomPerScroll: 1.8,\n\t\t\tshowRotationControl: true,\n    });\n    viewer.addTiledImage({\n      tileSource: \"/slide.dzi\",\n      x: 0,\n      y: 0,\n      success: paintHeatmap\n    });\n  },[]);\n\n  return (<div id=\"seadragon-viewer\" style={{ height: \"90vh\", width: \"100%\" }} />);\n};\n\nexport default OpenSeaDragonView;\n","import h337 from './heatmap.js';\n\n/*\n* heatmap.js openseadragon overlay\n*\n* Dual-licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\n* and the Beerware (http://en.wikipedia.org/wiki/Beerware) license.\n*/\n\nexport default function HeatmapOverlay(viewer, cfg) {\n  var self = this;\n  this._viewer = viewer;\n  this.initialize(cfg || {});\n};\n\nHeatmapOverlay.CSS_TRANSFORM = (function () {\n  var div = document.createElement('div');\n  var props = [\n      'transform',\n      'WebkitTransform',\n      'MozTransform',\n      'OTransform',\n      'msTransform'\n  ];\n\n  for (var i = 0; i < props.length; i++) {\n      var prop = props[i];\n      if (div.style[prop] !== undefined) {\n          return prop;\n      }\n  }\n  return props[0];\n})();\n\nHeatmapOverlay.prototype.initialize = function (cfg) {\n  this.cfg = cfg;\n\n  //var map = this.map = this.getMap();\n\n  var container = this.container = document.createElement('div');\n  var width = this.width = this._viewer.container.clientWidth;\n  var height = this.height = this._viewer.container.clientHeight;\n\n  container.style.cssText = 'width:' + width + 'px;height:' + height + 'px;';\n\n  this.data = [];\n  this.max = 1;\n\n  cfg.container = container;\n\n  this.onAdd();\n};\n\nHeatmapOverlay.prototype.setData = function (data) {\n  this.max = data.max;\n\n  // transform data to latlngs\n  var data = data.data;\n  var len = data.length;\n  var d = [];\n\n  while (len--) {\n      var entry = data[len];\n      var dataObj = {};\n      dataObj.value = entry.value;\n      dataObj.x = entry.x;\n      dataObj.y = entry.y;\n      if (entry.radius) {\n          dataObj.radius = entry.radius;\n      }\n      d.push(dataObj);\n  }\n  this.data = d;\n  this.update();\n};\n\nHeatmapOverlay.prototype.update = function () {\n  var zoom = this._viewer.viewport.getZoom(true);\n\n  if (this.data.length == 0) {\n      return;\n  }\n\n  var generatedData = { max: this.max };\n  var points = [];\n  // iterate through data\n  var len = this.data.length;\n  var localMax = 0;\n  var valueField = this.cfg.valueField;\n\n\n  while (len--) {\n      var entry = this.data[len];\n      var value = entry.value;\n\n      if (value > localMax) {\n          localMax = value;\n      }\n\n      var viewportPoint  = this._viewer.viewport.imageToViewportCoordinates(entry.x, entry.y);\n      var imagePoint = this._viewer.viewport.pixelFromPoint(viewportPoint , true);\n\n  //ignore outter point\n      if (imagePoint.x <= 0 || imagePoint.y <= 0 || imagePoint.x >= this._viewer.viewport.getContainerSize().x || imagePoint.y >= this._viewer.viewport.getContainerSize().y)\n          continue;\n\n      var point = { x: Math.round(imagePoint.x), y: Math.round(imagePoint.y), value : value };\n\n      var radius;\n\n      if (entry.radius) {\n          radius = entry.radius * zoom;\n      } else {\n          radius = (this.cfg.radius || 20) * zoom;\n      }\n      point.radius = radius;\n      points.push(point);\n  }\n  if (this.cfg.useLocalExtrema) {\n      generatedData.max = localMax;\n  }\n\n  generatedData.data = points;\n\n  this.heatmap.setData(generatedData);\n\n};\n\nHeatmapOverlay.prototype.onAdd = function () {\n\n  this._viewer.canvas.appendChild(this.container);\n\n  this.changeHandler = this._viewer.addHandler('update-viewport', function (arg) {\n      arg.userData.draw.call(arg.userData);\n  }, this);\n\n\n  if (!this.heatmap) {\n      console.log('HeatmapOverlay', this.cfg);\n      this.heatmap = h337.create(this.cfg);\n  }\n  this.draw();\n};\n\nHeatmapOverlay.prototype.draw = function () {\n  if (!this._viewer) { return; }\n\n  this.update();\n};","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport MailIcon from '@material-ui/icons/Mail';\n\nimport OpenSeaDragonView from './components/OpenSeaDragonView';\nimport './App.css';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: 0, // theme.spacing(3),\n  },\n}));\n\nconst App = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Pathology Viewer\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <List>\n          {['Inbox', 'Starred', 'Send email', 'Drafts'].map((text, index) => (\n            <ListItem button key={text}>\n              <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItem>\n          ))}\n        </List>\n        <Divider />\n        <List>\n          {['All mail', 'Trash', 'Spam'].map((text, index) => (\n            <ListItem button key={text}>\n              <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItem>\n          ))}\n        </List>\n      </Drawer>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        <OpenSeaDragonView />\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}